var app=function(){"use strict";function e(){}function n(e){return e()}function t(){return Object.create(null)}function o(e){e.forEach(n)}function c(e){return"function"==typeof e}function r(e,n){return e!=e?n==n:e!==n||e&&"object"==typeof e||"function"==typeof e}function a(e,n){e.appendChild(n)}function l(e,n,t){e.insertBefore(n,t||null)}function s(e){e.parentNode.removeChild(e)}function d(e,n){for(let t=0;t<e.length;t+=1)e[t]&&e[t].d(n)}function h(e){return document.createElement(e)}function u(e){return document.createTextNode(e)}function i(){return u(" ")}function m(e,n,t,o){return e.addEventListener(n,t,o),()=>e.removeEventListener(n,t,o)}function f(e,n,t){null==t?e.removeAttribute(n):e.setAttribute(n,t)}function p(e,n){n=""+n,e.data!==n&&(e.data=n)}function v(e,n){for(let t=0;t<e.options.length;t+=1){const o=e.options[t];if(o.__value===n)return void(o.selected=!0)}}function g(e){const n=e.querySelector(":checked")||e.options[0];return n&&n.__value}let w;function _(e){w=e}const b=[],y=[],$=[],x=[],M=Promise.resolve();let S=!1;function k(e){$.push(e)}function N(){const e=new Set;do{for(;b.length;){const e=b.shift();_(e),R(e.$$)}for(;y.length;)y.pop()();for(let n=0;n<$.length;n+=1){const t=$[n];e.has(t)||(t(),e.add(t))}$.length=0}while(b.length);for(;x.length;)x.pop()();S=!1}function R(e){e.fragment&&(e.update(e.dirty),o(e.before_update),e.fragment.p(e.dirty,e.ctx),e.dirty=null,e.after_update.forEach(k))}const E=new Set;function O(e,n){e.$$.dirty||(b.push(e),S||(S=!0,M.then(N)),e.$$.dirty=t()),e.$$.dirty[n]=!0}function I(r,a,l,s,d,h){const u=w;_(r);const i=a.props||{},m=r.$$={fragment:null,ctx:null,props:h,update:e,not_equal:d,bound:t(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(u?u.$$.context:[]),callbacks:t(),dirty:null};let f=!1;var p,v,g;m.ctx=l?l(r,i,(e,n)=>{m.ctx&&d(m.ctx[e],m.ctx[e]=n)&&(m.bound[e]&&m.bound[e](n),f&&O(r,e))}):i,m.update(),f=!0,o(m.before_update),m.fragment=s(m.ctx),a.target&&(a.hydrate?m.fragment.l((g=a.target,Array.from(g.childNodes))):m.fragment.c(),a.intro&&((p=r.$$.fragment)&&p.i&&(E.delete(p),p.i(v))),function(e,t,r){const{fragment:a,on_mount:l,on_destroy:s,after_update:d}=e.$$;a.m(t,r),k(()=>{const t=l.map(n).filter(c);s?s.push(...t):o(t),e.$$.on_mount=[]}),d.forEach(k)}(r,a.target,a.anchor),N()),_(u)}class C{$destroy(){var n,t;t=1,(n=this).$$.fragment&&(o(n.$$.on_destroy),n.$$.fragment.d(t),n.$$.on_destroy=n.$$.fragment=null,n.$$.ctx={}),this.$destroy=e}$on(e,n){const t=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return t.push(n),()=>{const e=t.indexOf(n);-1!==e&&t.splice(e,1)}}$set(){}}const j=["C","D","E","F","G","A","B"],H=["I","II","III","IV","V","VI","VII"],L=[[!1,""],[!0,""],[!0,""],[!1,""],[!1,""],[!0,""],[!0,"Â°"]],A=["","#","x","(3#)","(4#)","(3#)","(4#)","(5#|5b)","(4b)","(3b)","bb","b"],T=[["maj7","6"],["m7","m6"],["m7"],["maj7","6"],["7","6"],["m7"],["dim7"]],D=[0,2,4,5,7,9,11],V=[2,2,1,2,2,2,1],q=[["Ionian","major"],["Dorian"],["Phrygian"],["Lydian"],["Mixolydian"],["Aeolian","minor"],["Locrian"]],B=j.map((e,n)=>[e,n]),P=[["x",2],["#",1],["~",0],["b",-1],["bb",-2]],z=(e,n)=>(e%n+n)%n,F=function(e,n){return z(D[z(e,7)]+n,12)},G=function(e,n,t){for(var o=[],c=0,r=0,a=0;a<7;a++){r=z(a+e,7);var l={};l.wni=z(n+a,7),l.rni=F(n,c+t),l.rwni=F(l.wni,0),l.mi=z(l.rni-l.rwni,12),l.wholeNote=j[l.wni],l.mod=A[l.mi],l.possibleChords=T[r],l.bareRoman=H[a],l.secRoman=(L[r][0]?l.bareRoman.toLowerCase():l.bareRoman).concat(L[r][1]),o.push(l),c+=V[r]}return o},W=function(e,n){for(var t=[],o=0;o<7;o++){var c={};c.i=o,c.name=q[o],c.chordScale=G(o,e,n),t.push(c)}return t};var J=Object.freeze({ROMAN_NOTES:H,WHOLE_NOTE_SELECT:B,MOD_SELECT:P,generateChordScale:G,generateModeMatrix:W});function K(e,n,t){const o=Object.create(e);return o.chord=n[t],o}function Q(e,n,t){const o=Object.create(e);return o.mode=n[t],o}function U(e,n,t){const o=Object.create(e);return o.rn=n[t],o}function X(e,n,t){const o=Object.create(e);return o.n=n[t][0],o.v=n[t][1],o}function Y(e,n,t){const o=Object.create(e);return o.n=n[t][0],o.v=n[t][1],o}function Z(e){var n,t,o=e.n;return{c(){n=h("option"),t=u(o),n.__value=e.v,n.value=n.__value},m(e,o){l(e,n,o),a(n,t)},p(e,t){n.value=n.__value},d(e){e&&s(n)}}}function ee(e){var n,t,o=e.n;return{c(){n=h("option"),t=u(o),n.__value=e.v,n.value=n.__value},m(e,o){l(e,n,o),a(n,t)},p(e,t){n.value=n.__value},d(e){e&&s(n)}}}function ne(e){for(var n,t,o=e.showModeNames&&te(),c=H,r=[],u=0;u<c.length;u+=1)r[u]=oe(U(e,c,u));return{c(){n=h("tr"),o&&o.c(),t=i();for(var e=0;e<r.length;e+=1)r[e].c()},m(e,c){l(e,n,c),o&&o.m(n,null),a(n,t);for(var s=0;s<r.length;s+=1)r[s].m(n,null)},p(e,a){if(a.showModeNames?o||((o=te()).c(),o.m(n,t)):o&&(o.d(1),o=null),e.cl){c=H;for(var l=0;l<c.length;l+=1){const t=U(a,c,l);r[l]?r[l].p(e,t):(r[l]=oe(t),r[l].c(),r[l].m(n,null))}for(;l<r.length;l+=1)r[l].d(1);r.length=c.length}},d(e){e&&s(n),o&&o.d(),d(r,e)}}}function te(e){var n;return{c(){(n=h("th")).textContent="MODES",f(n,"class","svelte-164dwyv")},m(e,t){l(e,n,t)},d(e){e&&s(n)}}}function oe(n){var t,o,c=n.rn;return{c(){t=h("th"),o=u(c),f(t,"class","svelte-164dwyv")},m(e,n){l(e,t,n),a(t,o)},p:e,d(e){e&&s(t)}}}function ce(e){var n,t,o,c=e.mode.name[0];return{c(){n=h("td"),t=h("b"),o=u(c),f(n,"class","mode svelte-164dwyv")},m(e,c){l(e,n,c),a(n,t),a(t,o)},p(e,n){e.modeMatrix&&c!==(c=n.mode.name[0])&&p(o,c)},d(e){e&&s(n)}}}function re(e){var n,t,o,c,r=e.chord.secRoman;return{c(){n=h("td"),t=h("span"),o=h("b"),c=u(r),f(t,"class","roman"),f(n,"class","roman svelte-164dwyv")},m(e,r){l(e,n,r),a(n,t),a(t,o),a(o,c)},p(e,n){e.modeMatrix&&r!==(r=n.chord.secRoman)&&p(c,r)},d(e){e&&s(n)}}}function ae(e){var n,t,o,c,r,d,m,v,g,w,_,b,y,$=e.chord.wholeNote,x=e.chord.mod,M=e.chord.possibleChords[0],S=e.showRoman&&re(e);return{c(){n=h("td"),t=h("table"),o=h("tr"),c=h("td"),r=h("span"),d=h("b"),m=u($),v=h("sup"),g=u(x),w=h("span"),_=u(M),b=i(),y=h("tr"),S&&S.c(),f(r,"class","note"),f(w,"class","chord"),f(c,"class","chord svelte-164dwyv"),f(t,"class","chord svelte-164dwyv"),f(n,"class","svelte-164dwyv")},m(e,s){l(e,n,s),a(n,t),a(t,o),a(o,c),a(c,r),a(r,d),a(d,m),a(d,v),a(v,g),a(c,w),a(w,_),a(t,b),a(t,y),S&&S.m(y,null)},p(e,n){e.modeMatrix&&$!==($=n.chord.wholeNote)&&p(m,$),e.modeMatrix&&x!==(x=n.chord.mod)&&p(g,x),e.modeMatrix&&M!==(M=n.chord.possibleChords[0])&&p(_,M),n.showRoman?S?S.p(e,n):((S=re(n)).c(),S.m(y,null)):S&&(S.d(1),S=null)},d(e){e&&s(n),S&&S.d()}}}function le(e){for(var n,t,o,c=e.showModeNames&&ce(e),r=e.mode.chordScale,u=[],m=0;m<r.length;m+=1)u[m]=ae(K(e,r,m));return{c(){n=h("tr"),c&&c.c(),t=i();for(var e=0;e<u.length;e+=1)u[e].c();o=i()},m(e,r){l(e,n,r),c&&c.m(n,null),a(n,t);for(var s=0;s<u.length;s+=1)u[s].m(n,null);a(n,o)},p(e,a){if(a.showModeNames?c?c.p(e,a):((c=ce(a)).c(),c.m(n,t)):c&&(c.d(1),c=null),e.showRoman||e.modeMatrix){r=a.mode.chordScale;for(var l=0;l<r.length;l+=1){const t=K(a,r,l);u[l]?u[l].p(e,t):(u[l]=ae(t),u[l].c(),u[l].m(n,o))}for(;l<u.length;l+=1)u[l].d(1);u.length=r.length}},d(e){e&&s(n),c&&c.d(),d(u,e)}}}function se(n){for(var t,c,r,p,g,w,_,b,y,$,x,M,S,N,R,E,O,I,C,j,H,L,A,T=B,D=[],V=0;V<T.length;V+=1)D[V]=Z(Y(n,T,V));var q=P,z=[];for(V=0;V<q.length;V+=1)z[V]=ee(X(n,q,V));var F=n.showHeader&&ne(n),G=n.modeMatrix,W=[];for(V=0;V<G.length;V+=1)W[V]=le(Q(n,G,V));return{c(){(t=h("h1")).textContent="~ modes ~",c=i(),r=h("div"),p=h("select");for(var e=0;e<D.length;e+=1)D[e].c();g=i(),w=h("select");for(e=0;e<z.length;e+=1)z[e].c();_=i(),b=h("table"),F&&F.c(),y=i();for(e=0;e<W.length;e+=1)W[e].c();$=i(),x=h("p"),M=h("span"),S=h("input"),N=u(" show mode names"),R=i(),E=h("span"),O=h("input"),I=u(" show header"),C=i(),j=h("span"),H=h("input"),L=u(" show roman numerals"),f(t,"class","svelte-164dwyv"),void 0===n.wniSelect&&k(()=>n.select0_change_handler.call(p)),f(p,"class","svelte-164dwyv"),void 0===n.miSelect&&k(()=>n.select1_change_handler.call(w)),f(w,"class","svelte-164dwyv"),f(b,"class","modes svelte-164dwyv"),f(S,"type","checkbox"),f(M,"class","check svelte-164dwyv"),f(O,"type","checkbox"),f(E,"class","check svelte-164dwyv"),f(H,"type","checkbox"),f(j,"class","check svelte-164dwyv"),f(r,"class","svelte-164dwyv"),A=[m(p,"change",n.select0_change_handler),m(w,"change",n.select1_change_handler),m(S,"change",n.input0_change_handler),m(O,"change",n.input1_change_handler),m(H,"change",n.input2_change_handler)]},m(e,o){l(e,t,o),l(e,c,o),l(e,r,o),a(r,p);for(var s=0;s<D.length;s+=1)D[s].m(p,null);v(p,n.wniSelect),a(r,g),a(r,w);for(s=0;s<z.length;s+=1)z[s].m(w,null);v(w,n.miSelect),a(r,_),a(r,b),F&&F.m(b,null),a(b,y);for(s=0;s<W.length;s+=1)W[s].m(b,null);a(r,$),a(r,x),a(x,M),a(M,S),S.checked=n.showModeNames,a(M,N),a(x,R),a(x,E),a(E,O),O.checked=n.showHeader,a(E,I),a(x,C),a(x,j),a(j,H),H.checked=n.showRoman,a(j,L)},p(e,n){if(e.cl){T=B;for(var t=0;t<T.length;t+=1){const o=Y(n,T,t);D[t]?D[t].p(e,o):(D[t]=Z(o),D[t].c(),D[t].m(p,null))}for(;t<D.length;t+=1)D[t].d(1);D.length=T.length}if(e.wniSelect&&v(p,n.wniSelect),e.cl){q=P;for(t=0;t<q.length;t+=1){const o=X(n,q,t);z[t]?z[t].p(e,o):(z[t]=ee(o),z[t].c(),z[t].m(w,null))}for(;t<z.length;t+=1)z[t].d(1);z.length=q.length}if(e.miSelect&&v(w,n.miSelect),n.showHeader?F?F.p(e,n):((F=ne(n)).c(),F.m(b,y)):F&&(F.d(1),F=null),e.modeMatrix||e.showRoman||e.showModeNames){G=n.modeMatrix;for(t=0;t<G.length;t+=1){const o=Q(n,G,t);W[t]?W[t].p(e,o):(W[t]=le(o),W[t].c(),W[t].m(b,null))}for(;t<W.length;t+=1)W[t].d(1);W.length=G.length}e.showModeNames&&(S.checked=n.showModeNames),e.showHeader&&(O.checked=n.showHeader),e.showRoman&&(H.checked=n.showRoman)},i:e,o:e,d(e){e&&(s(t),s(c),s(r)),d(D,e),d(z,e),F&&F.d(),d(W,e),o(A)}}}function de(e,n,t){let o=0,c=0,r=!0,a=!0,l=!0,s=W(0,0);return e.$$.update=((e={wniSelect:1,miSelect:1})=>{(e.wniSelect||e.miSelect)&&t("modeMatrix",s=W(parseInt(o),parseInt(c)))}),{wniSelect:o,miSelect:c,showModeNames:r,showHeader:a,showRoman:l,modeMatrix:s,select0_change_handler:function(){o=g(this),t("wniSelect",o),t("cl",J)},select1_change_handler:function(){c=g(this),t("miSelect",c),t("cl",J)},input0_change_handler:function(){r=this.checked,t("showModeNames",r)},input1_change_handler:function(){a=this.checked,t("showHeader",a)},input2_change_handler:function(){l=this.checked,t("showRoman",l)}}}return new class extends C{constructor(e){super(),I(this,e,de,se,r,[])}}({target:document.body,props:{}})}();
//# sourceMappingURL=bundle.js.map
